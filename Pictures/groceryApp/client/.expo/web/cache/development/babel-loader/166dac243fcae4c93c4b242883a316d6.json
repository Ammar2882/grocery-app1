{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"D:\\\\groceryAppExpo\\\\screens\\\\admin\\\\Home.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Icon from \"@expo/vector-icons/AntDesign\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nvar Home = function (_React$Component) {\n  _inherits(Home, _React$Component);\n\n  var _super = _createSuper(Home);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _super.call(this, props);\n\n    _this.getAdminId = function _callee() {\n      var afterParse, adminId;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.t0 = JSON;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"item\"));\n\n            case 3:\n              _context.t1 = _context.sent;\n              afterParse = _context.t0.parse.call(_context.t0, _context.t1);\n              adminId = afterParse.adminId;\n              console.log(\"Admin ID: \" + adminId);\n\n              _this.setState({\n                adminID: adminId\n              });\n\n              _this.fetchData();\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.handleRefresh = function () {\n      _this.setState({\n        loading: false\n      }, function () {\n        _this.fetchData();\n\n        console.log(_this.state.arrayData);\n      });\n    };\n\n    _this.renderSeparator = function () {\n      return React.createElement(View, {\n        style: {\n          marginBottom: -10\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 5\n        }\n      });\n    };\n\n    _this.state = {\n      loading: true,\n      edit: false,\n      jarNames: \"\",\n      currlevel: \"\",\n      jarname: \"\",\n      adminID: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getAdminId();\n      this.setState({\n        loading: false\n      });\n    }\n  }, {\n    key: \"fetchData\",\n    value: function fetchData() {\n      var _this2 = this;\n\n      this.setState({\n        loading: true\n      });\n      fetch(\"http://192.168.18.3:3001/getHomeData/\" + this.state.adminID).then(function (res) {\n        return res.json();\n      }).then(function (resJson) {\n        console.log(resJson);\n\n        _this2.setState({\n          jarNames: resJson\n        });\n\n        _this2.setState({\n          loading: false\n        });\n      }).catch(function (e) {\n        return console.log(e);\n      });\n    }\n  }, {\n    key: \"getValues\",\n    value: function getValues(val) {\n      if (val >= 0 && val <= 10) {\n        this.SendMail();\n        return React.createElement(Text, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 14\n          }\n        }, \"high\");\n      } else if (val >= 11 && val <= 16) {\n        return React.createElement(Text, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 14\n          }\n        }, \"Medium\");\n      } else if (val >= 17) {\n        return React.createElement(Text, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 14\n          }\n        }, \"low\");\n      }\n    }\n  }, {\n    key: \"onAddJar\",\n    value: function onAddJar() {\n      this.setState({\n        jarname: \"\"\n      });\n      fetch(\"http://192.168.18.3:3001/addJar/\" + this.state.adminID, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          jarName: this.state.jarname\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resJson) {\n        console.log(resJson);\n        console.log(\"added\");\n      }).catch(function (e) {\n        return console.log(e);\n      });\n    }\n  }, {\n    key: \"SendMail\",\n    value: function SendMail() {\n      fetch(\"http://192.168.18.3:3001/sendMail/\" + this.state.adminID, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (res) {\n        return res.text();\n      }).then(function (resJson) {\n        console.log(resJson);\n        console.log(\"client side email sent\");\n      });\n    }\n  }, {\n    key: \"onDelete\",\n    value: function onDelete(jarName) {\n      this.setState({\n        edit: false\n      });\n      this.fetchData();\n      fetch(\"http://192.168.18.3:3001/deleteJarItem/\" + this.state.adminID + \"/\" + jarName, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resJson) {\n        console.log(resJson);\n      }).catch(function (e) {\n        return console.log(e);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(React.Fragment, null, React.createElement(FlatList, {\n        data: this.state.jarNames,\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item;\n          return React.createElement(TouchableOpacity, {\n            key: item.key,\n            onPress: function onPress() {\n              return _this3.props.navigation.navigate('History', item);\n            },\n            onLongPress: function onLongPress() {\n              return _this3.setState({\n                edit: true\n              });\n            },\n            style: styles.card,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 13\n            }\n          }, React.createElement(View, {\n            style: {\n              flexDirection: \"row\",\n              marginVertical: 30\n            },\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 15\n            }\n          }, React.createElement(Text, {\n            style: {\n              flex: 1,\n              fontSize: 16,\n              marginLeft: 20\n            },\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 17\n            }\n          }, item.key), React.createElement(View, {\n            style: styles.pill,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 17\n            }\n          }, _this3.getValues(item.value)), _this3.state.edit ? React.createElement(Icon, {\n            onPress: function onPress() {\n              return _this3.onDelete(item.jars);\n            },\n            style: {\n              marginRight: 20\n            },\n            name: \"close\",\n            size: 19,\n            color: \"red\",\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 19\n            }\n          }) : null));\n        },\n        ItemSeparatorComponent: this.renderSeparator,\n        keyExtractor: function keyExtractor(item) {\n          return item.jars;\n        },\n        refreshing: this.state.loading,\n        onRefresh: this.handleRefresh,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 9\n        }\n      }), React.createElement(View, {\n        style: styles.addWrapper,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.inputView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }\n      }, React.createElement(TextInput, {\n        style: styles.inputText,\n        placeholder: \"Add New Jar\",\n        placeholderTextColor: \"#888\",\n        value: this.state.jarname,\n        onChangeText: function onChangeText(text) {\n          return _this3.setState({\n            jarname: text\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }\n      })), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this3.onAddJar();\n        },\n        style: styles.addBtnShr,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 13\n        }\n      }, \"ADD\"))));\n    }\n  }]);\n\n  return Home;\n}(React.Component);\n\nexport { Home as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    backgroundColor: \"#f2f2f2\",\n    width: \"100%\",\n    height: \"100%\"\n  },\n  card: {\n    width: \"95%\",\n    height: 80,\n    backgroundColor: \"#fff\",\n    borderRadius: 5,\n    elevation: 5,\n    margin: 10\n  },\n  pill: {\n    flex: 2,\n    backgroundColor: \"lightgreen\",\n    padding: 5,\n    borderRadius: 5,\n    maxWidth: 60,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginRight: 20\n  },\n  addBtn: {\n    backgroundColor: \"#fb5b5a\",\n    width: \"90%\",\n    margin: 15,\n    padding: 15,\n    borderRadius: 5,\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\"\n  },\n  addBtnShr: {\n    backgroundColor: \"#fb5b5a\",\n    height: 50,\n    width: \"20%\",\n    padding: 1,\n    borderRadius: 5,\n    display: \"flex\",\n    alignItems: \"center\",\n    margin: 20,\n    justifyContent: \"center\"\n  },\n  addWrapper: {\n    display: \"flex\",\n    flexDirection: \"row\"\n  },\n  inputView: {\n    width: \"65%\",\n    backgroundColor: \"#fff\",\n    borderRadius: 5,\n    borderWidth: 1,\n    borderColor: \"#fb5b5a\",\n    height: 50,\n    marginVertical: 20,\n    marginLeft: 20,\n    justifyContent: \"center\",\n    padding: 20\n  },\n  inputText: {\n    height: 45,\n    color: \"#000\"\n  }\n});","map":{"version":3,"sources":["D:/groceryAppExpo/screens/admin/Home.js"],"names":["React","Icon","AsyncStorage","Home","props","getAdminId","JSON","getItem","afterParse","parse","adminId","console","log","setState","adminID","fetchData","handleRefresh","loading","state","arrayData","renderSeparator","marginBottom","edit","jarNames","currlevel","jarname","fetch","then","res","json","resJson","catch","e","val","SendMail","method","headers","body","stringify","jarName","text","item","key","navigation","navigate","styles","card","flexDirection","marginVertical","flex","fontSize","marginLeft","pill","getValues","value","onDelete","jars","marginRight","addWrapper","inputView","inputText","onAddJar","addBtnShr","Component","StyleSheet","create","container","alignItems","backgroundColor","width","height","borderRadius","elevation","margin","padding","maxWidth","display","justifyContent","addBtn","borderWidth","borderColor","color"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;;;;;;AASA,OAAOC,IAAP;AACA,OAAOC,YAAP,MAAyB,2CAAzB;;IAEqBC,I;;;;;AACnB,gBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;;AADiB,UAiBnBC,UAjBmB,GAiBN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BACQC,IADR;AAAA;AAAA,+CACyBJ,YAAY,CAACK,OAAb,CAAqB,MAArB,CADzB;;AAAA;AAAA;AACLC,cAAAA,UADK,eACaC,KADb;AAELC,cAAAA,OAFK,GAEKF,UAAU,CAACE,OAFhB;AAGXC,cAAAA,OAAO,CAACC,GAAR,CAAY,eAAeF,OAA3B;;AACA,oBAAKG,QAAL,CAAc;AAAEC,gBAAAA,OAAO,EAAEJ;AAAX,eAAd;;AACA,oBAAKK,SAAL;;AALW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAjBM;;AAAA,UAuGnBC,aAvGmB,GAuGH,YAAM;AACpB,YAAKH,QAAL,CAAc;AAAEI,QAAAA,OAAO,EAAE;AAAX,OAAd,EAAkC,YAAM;AACtC,cAAKF,SAAL;;AACAJ,QAAAA,OAAO,CAACC,GAAR,CAAY,MAAKM,KAAL,CAAWC,SAAvB;AACD,OAHD;AAID,KA5GkB;;AAAA,UA8GnBC,eA9GmB,GA8GD;AAAA,aAChB,oBAAC,IAAD;AACE,QAAA,KAAK,EAAE;AACLC,UAAAA,YAAY,EAAE,CAAC;AADV,SADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADgB;AAAA,KA9GC;;AAEjB,UAAKH,KAAL,GAAa;AACXD,MAAAA,OAAO,EAAE,IADE;AAEXK,MAAAA,IAAI,EAAE,KAFK;AAGXC,MAAAA,QAAQ,EAAE,EAHC;AAIXC,MAAAA,SAAS,EAAE,EAJA;AAKXC,MAAAA,OAAO,EAAE,EALE;AAMXX,MAAAA,OAAO,EAAE;AANE,KAAb;AAFiB;AAUlB;;;;WAED,6BAAoB;AAClB,WAAKT,UAAL;AACA,WAAKQ,QAAL,CAAc;AAAEI,QAAAA,OAAO,EAAE;AAAX,OAAd;AACD;;;WAUD,qBAAY;AAAA;;AACV,WAAKJ,QAAL,CAAc;AAAEI,QAAAA,OAAO,EAAE;AAAX,OAAd;AACAS,MAAAA,KAAK,CAAC,0CAA0C,KAAKR,KAAL,CAAWJ,OAAtD,CAAL,CACGa,IADH,CACQ,UAACC,GAAD;AAAA,eAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,OADR,EAEGF,IAFH,CAEQ,UAACG,OAAD,EAAa;AACjBnB,QAAAA,OAAO,CAACC,GAAR,CAAYkB,OAAZ;;AACA,QAAA,MAAI,CAACjB,QAAL,CAAc;AAAEU,UAAAA,QAAQ,EAAEO;AAAZ,SAAd;;AACA,QAAA,MAAI,CAACjB,QAAL,CAAc;AAAEI,UAAAA,OAAO,EAAE;AAAX,SAAd;AACD,OANH,EAOGc,KAPH,CAOS,UAACC,CAAD;AAAA,eAAOrB,OAAO,CAACC,GAAR,CAAYoB,CAAZ,CAAP;AAAA,OAPT;AAQD;;;WAED,mBAAUC,GAAV,EAAe;AACb,UAAIA,GAAG,IAAI,CAAP,IAAYA,GAAG,IAAI,EAAvB,EAA2B;AACzB,aAAKC,QAAL;AACA,eAAO,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAP;AACD,OAHD,MAGO,IAAID,GAAG,IAAI,EAAP,IAAaA,GAAG,IAAI,EAAxB,EAA4B;AACjC,eAAO,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAP;AACD,OAFM,MAEA,IAAIA,GAAG,IAAI,EAAX,EAAe;AACpB,eAAO,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAP;AACD;AACF;;;WAED,oBAAW;AACT,WAAKpB,QAAL,CAAc;AAAEY,QAAAA,OAAO,EAAE;AAAX,OAAd;AACAC,MAAAA,KAAK,CAAC,qCAAqC,KAAKR,KAAL,CAAWJ,OAAjD,EAA0D;AAC7DqB,QAAAA,MAAM,EAAE,KADqD;AAE7DC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT,SAFoD;AAK7DC,QAAAA,IAAI,EAAE/B,IAAI,CAACgC,SAAL,CAAe;AACnBC,UAAAA,OAAO,EAAE,KAAKrB,KAAL,CAAWO;AADD,SAAf;AALuD,OAA1D,CAAL,CASGE,IATH,CASQ,UAACC,GAAD;AAAA,eAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,OATR,EAUGF,IAVH,CAUQ,UAACG,OAAD,EAAa;AACjBnB,QAAAA,OAAO,CAACC,GAAR,CAAYkB,OAAZ;AACAnB,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACD,OAbH,EAcGmB,KAdH,CAcS,UAACC,CAAD;AAAA,eAAOrB,OAAO,CAACC,GAAR,CAAYoB,CAAZ,CAAP;AAAA,OAdT;AAeD;;;WAED,oBAAW;AACTN,MAAAA,KAAK,CAAC,uCAAuC,KAAKR,KAAL,CAAWJ,OAAnD,EAA4D;AAC/DqB,QAAAA,MAAM,EAAE,KADuD;AAE/DC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT;AAFsD,OAA5D,CAAL,CAMGT,IANH,CAMQ,UAACC,GAAD;AAAA,eAASA,GAAG,CAACY,IAAJ,EAAT;AAAA,OANR,EAOGb,IAPH,CAOQ,UAACG,OAAD,EAAa;AACjBnB,QAAAA,OAAO,CAACC,GAAR,CAAYkB,OAAZ;AACAnB,QAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ;AACD,OAVH;AAWD;;;WAED,kBAAS2B,OAAT,EAAkB;AAChB,WAAK1B,QAAL,CAAc;AAAES,QAAAA,IAAI,EAAE;AAAR,OAAd;AACA,WAAKP,SAAL;AACAW,MAAAA,KAAK,CACH,4CACE,KAAKR,KAAL,CAAWJ,OADb,GAEE,GAFF,GAGEyB,OAJC,EAKH;AACEJ,QAAAA,MAAM,EAAE,KADV;AAEEC,QAAAA,OAAO,EAAE;AACP,0BAAgB;AADT;AAFX,OALG,CAAL,CAYGT,IAZH,CAYQ,UAACC,GAAD;AAAA,eAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,OAZR,EAaGF,IAbH,CAaQ,UAACG,OAAD,EAAa;AACjBnB,QAAAA,OAAO,CAACC,GAAR,CAAYkB,OAAZ;AACD,OAfH,EAgBGC,KAhBH,CAgBS,UAACC,CAAD;AAAA,eAAOrB,OAAO,CAACC,GAAR,CAAYoB,CAAZ,CAAP;AAAA,OAhBT;AAiBD;;;WAiBD,kBAAS;AAAA;;AACP,aACE,0CACE,oBAAC,QAAD;AACE,QAAA,IAAI,EAAE,KAAKd,KAAL,CAAWK,QADnB;AAEE,QAAA,UAAU,EAAE;AAAA,cAAGkB,IAAH,QAAGA,IAAH;AAAA,iBACV,oBAAC,gBAAD;AACE,YAAA,GAAG,EAAEA,IAAI,CAACC,GADZ;AAEE,YAAA,OAAO,EAAE;AAAA,qBAAM,MAAI,CAACtC,KAAL,CAAWuC,UAAX,CAAsBC,QAAtB,CAA+B,SAA/B,EAA0CH,IAA1C,CAAN;AAAA,aAFX;AAGE,YAAA,WAAW,EAAE;AAAA,qBAAM,MAAI,CAAC5B,QAAL,CAAc;AAAES,gBAAAA,IAAI,EAAE;AAAR,eAAd,CAAN;AAAA,aAHf;AAIE,YAAA,KAAK,EAAEuB,MAAM,CAACC,IAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAME,oBAAC,IAAD;AAAM,YAAA,KAAK,EAAE;AAAEC,cAAAA,aAAa,EAAE,KAAjB;AAAwBC,cAAAA,cAAc,EAAE;AAAxC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE,oBAAC,IAAD;AAAM,YAAA,KAAK,EAAE;AAAEC,cAAAA,IAAI,EAAE,CAAR;AAAWC,cAAAA,QAAQ,EAAE,EAArB;AAAyBC,cAAAA,UAAU,EAAE;AAArC,aAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACGV,IAAI,CAACC,GADR,CADF,EAIE,oBAAC,IAAD;AAAM,YAAA,KAAK,EAAEG,MAAM,CAACO,IAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAA2B,MAAI,CAACC,SAAL,CAAeZ,IAAI,CAACa,KAApB,CAA3B,CAJF,EAKG,MAAI,CAACpC,KAAL,CAAWI,IAAX,GACC,oBAAC,IAAD;AACE,YAAA,OAAO,EAAE;AAAA,qBAAM,MAAI,CAACiC,QAAL,CAAcd,IAAI,CAACe,IAAnB,CAAN;AAAA,aADX;AAEE,YAAA,KAAK,EAAE;AAAEC,cAAAA,WAAW,EAAE;AAAf,aAFT;AAGE,YAAA,IAAI,EAAC,OAHP;AAIE,YAAA,IAAI,EAAE,EAJR;AAKE,YAAA,KAAK,EAAC,KALR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADD,GAQG,IAbN,CANF,CADU;AAAA,SAFd;AA0BE,QAAA,sBAAsB,EAAE,KAAKrC,eA1B/B;AA2BE,QAAA,YAAY,EAAE,sBAACqB,IAAD;AAAA,iBAAUA,IAAI,CAACe,IAAf;AAAA,SA3BhB;AA4BE,QAAA,UAAU,EAAE,KAAKtC,KAAL,CAAWD,OA5BzB;AA6BE,QAAA,SAAS,EAAE,KAAKD,aA7BlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAgCE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAE6B,MAAM,CAACa,UAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAEb,MAAM,CAACc,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,SAAD;AACE,QAAA,KAAK,EAAEd,MAAM,CAACe,SADhB;AAEE,QAAA,WAAW,EAAC,aAFd;AAGE,QAAA,oBAAoB,EAAC,MAHvB;AAIE,QAAA,KAAK,EAAE,KAAK1C,KAAL,CAAWO,OAJpB;AAKE,QAAA,YAAY,EAAE,sBAACe,IAAD;AAAA,iBAAU,MAAI,CAAC3B,QAAL,CAAc;AAAEY,YAAAA,OAAO,EAAEe;AAAX,WAAd,CAAV;AAAA,SALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF,EAUE,oBAAC,gBAAD;AACE,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAACqB,QAAL,EAAN;AAAA,SADX;AAEE,QAAA,KAAK,EAAEhB,MAAM,CAACiB,SAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAJF,CAVF,CAhCF,CADF;AAoDD;;;;EA5K+B9D,KAAK,CAAC+D,S;;SAAnB5D,I;AA+KrB,IAAM0C,MAAM,GAAGmB,UAAU,CAACC,MAAX,CAAkB;AAC/BC,EAAAA,SAAS,EAAE;AACTjB,IAAAA,IAAI,EAAE,CADG;AAETkB,IAAAA,UAAU,EAAE,QAFH;AAGTC,IAAAA,eAAe,EAAE,SAHR;AAITC,IAAAA,KAAK,EAAE,MAJE;AAKTC,IAAAA,MAAM,EAAE;AALC,GADoB;AAQ/BxB,EAAAA,IAAI,EAAE;AACJuB,IAAAA,KAAK,EAAE,KADH;AAEJC,IAAAA,MAAM,EAAE,EAFJ;AAGJF,IAAAA,eAAe,EAAE,MAHb;AAIJG,IAAAA,YAAY,EAAE,CAJV;AAKJC,IAAAA,SAAS,EAAE,CALP;AAMJC,IAAAA,MAAM,EAAE;AANJ,GARyB;AAgB/BrB,EAAAA,IAAI,EAAE;AACJH,IAAAA,IAAI,EAAE,CADF;AAEJmB,IAAAA,eAAe,EAAE,YAFb;AAGJM,IAAAA,OAAO,EAAE,CAHL;AAIJH,IAAAA,YAAY,EAAE,CAJV;AAKJI,IAAAA,QAAQ,EAAE,EALN;AAMJC,IAAAA,OAAO,EAAE,MANL;AAOJC,IAAAA,cAAc,EAAE,QAPZ;AAQJV,IAAAA,UAAU,EAAE,QARR;AASJV,IAAAA,WAAW,EAAE;AATT,GAhByB;AA2B/BqB,EAAAA,MAAM,EAAE;AACNV,IAAAA,eAAe,EAAE,SADX;AAENC,IAAAA,KAAK,EAAE,KAFD;AAGNI,IAAAA,MAAM,EAAE,EAHF;AAINC,IAAAA,OAAO,EAAE,EAJH;AAKNH,IAAAA,YAAY,EAAE,CALR;AAMNK,IAAAA,OAAO,EAAE,MANH;AAON7B,IAAAA,aAAa,EAAE,KAPT;AAQNoB,IAAAA,UAAU,EAAE,QARN;AASNU,IAAAA,cAAc,EAAE;AATV,GA3BuB;AAsC/Bf,EAAAA,SAAS,EAAE;AACTM,IAAAA,eAAe,EAAE,SADR;AAETE,IAAAA,MAAM,EAAE,EAFC;AAGTD,IAAAA,KAAK,EAAE,KAHE;AAITK,IAAAA,OAAO,EAAE,CAJA;AAKTH,IAAAA,YAAY,EAAE,CALL;AAMTK,IAAAA,OAAO,EAAE,MANA;AAOTT,IAAAA,UAAU,EAAE,QAPH;AAQTM,IAAAA,MAAM,EAAE,EARC;AASTI,IAAAA,cAAc,EAAE;AATP,GAtCoB;AAiD/BnB,EAAAA,UAAU,EAAE;AACVkB,IAAAA,OAAO,EAAE,MADC;AAEV7B,IAAAA,aAAa,EAAE;AAFL,GAjDmB;AAqD/BY,EAAAA,SAAS,EAAE;AACTU,IAAAA,KAAK,EAAE,KADE;AAETD,IAAAA,eAAe,EAAE,MAFR;AAGTG,IAAAA,YAAY,EAAE,CAHL;AAITQ,IAAAA,WAAW,EAAE,CAJJ;AAKTC,IAAAA,WAAW,EAAE,SALJ;AAMTV,IAAAA,MAAM,EAAE,EANC;AAOTtB,IAAAA,cAAc,EAAE,EAPP;AAQTG,IAAAA,UAAU,EAAE,EARH;AAST0B,IAAAA,cAAc,EAAE,QATP;AAUTH,IAAAA,OAAO,EAAE;AAVA,GArDoB;AAiE/Bd,EAAAA,SAAS,EAAE;AACTU,IAAAA,MAAM,EAAE,EADC;AAETW,IAAAA,KAAK,EAAE;AAFE;AAjEoB,CAAlB,CAAf","sourcesContent":["import React from \"react\";\r\nimport {\r\n  StyleSheet,\r\n  FlatList,\r\n  View,\r\n  Text,\r\n  TouchableOpacity,\r\n  TextInput,\r\n} from \"react-native\";\r\nimport Icon from \"react-native-vector-icons/AntDesign\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nexport default class Home extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n      edit: false,\r\n      jarNames: \"\",\r\n      currlevel: \"\",\r\n      jarname: \"\",\r\n      adminID: \"\",\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getAdminId();\r\n    this.setState({ loading: false });\r\n  }\r\n\r\n  getAdminId = async () => {\r\n    const afterParse = JSON.parse(await AsyncStorage.getItem(\"item\"));\r\n    const adminId = afterParse.adminId;\r\n    console.log(\"Admin ID: \" + adminId);\r\n    this.setState({ adminID: adminId });\r\n    this.fetchData();\r\n  };\r\n\r\n  fetchData() {\r\n    this.setState({ loading: true });\r\n    fetch(\"http://192.168.18.3:3001/getHomeData/\" + this.state.adminID)\r\n      .then((res) => res.json())\r\n      .then((resJson) => {\r\n        console.log(resJson);\r\n        this.setState({ jarNames: resJson });\r\n        this.setState({ loading: false });\r\n      })\r\n      .catch((e) => console.log(e));\r\n  }\r\n\r\n  getValues(val) {\r\n    if (val >= 0 && val <= 10) {\r\n      this.SendMail();\r\n      return <Text>high</Text>;\r\n    } else if (val >= 11 && val <= 16) {\r\n      return <Text>Medium</Text>;\r\n    } else if (val >= 17) {\r\n      return <Text>low</Text>;\r\n    }\r\n  }\r\n\r\n  onAddJar() {\r\n    this.setState({ jarname: \"\" });\r\n    fetch(\"http://192.168.18.3:3001/addJar/\" + this.state.adminID, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        jarName: this.state.jarname,\r\n      }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((resJson) => {\r\n        console.log(resJson);\r\n        console.log(\"added\");\r\n      })\r\n      .catch((e) => console.log(e));\r\n  }\r\n\r\n  SendMail() {\r\n    fetch(\"http://192.168.18.3:3001/sendMail/\" + this.state.adminID, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.text())\r\n      .then((resJson) => {\r\n        console.log(resJson);\r\n        console.log(\"client side email sent\");\r\n      });\r\n  }\r\n\r\n  onDelete(jarName) {\r\n    this.setState({ edit: false });\r\n    this.fetchData();\r\n    fetch(\r\n      \"http://192.168.18.3:3001/deleteJarItem/\" +\r\n        this.state.adminID +\r\n        \"/\" +\r\n        jarName,\r\n      {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    )\r\n      .then((res) => res.json())\r\n      .then((resJson) => {\r\n        console.log(resJson);\r\n      })\r\n      .catch((e) => console.log(e));\r\n  }\r\n\r\n  handleRefresh = () => {\r\n    this.setState({ loading: false }, () => {\r\n      this.fetchData();\r\n      console.log(this.state.arrayData);\r\n    });\r\n  };\r\n\r\n  renderSeparator = () => (\r\n    <View\r\n      style={{\r\n        marginBottom: -10,\r\n      }}\r\n    />\r\n  );\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <FlatList\r\n          data={this.state.jarNames}\r\n          renderItem={({ item }) => (\r\n            <TouchableOpacity\r\n              key={item.key}\r\n              onPress={() => this.props.navigation.navigate('History', item)}\r\n              onLongPress={() => this.setState({ edit: true })}\r\n              style={styles.card}\r\n            >\r\n              <View style={{ flexDirection: \"row\", marginVertical: 30 }}>\r\n                <Text style={{ flex: 1, fontSize: 16, marginLeft: 20 }}>\r\n                  {item.key}\r\n                </Text>\r\n                <View style={styles.pill}>{this.getValues(item.value)}</View>\r\n                {this.state.edit ? (\r\n                  <Icon\r\n                    onPress={() => this.onDelete(item.jars)}\r\n                    style={{ marginRight: 20 }}\r\n                    name=\"close\"\r\n                    size={19}\r\n                    color=\"red\"\r\n                  />\r\n                ) : null}\r\n              </View>\r\n            </TouchableOpacity>\r\n          )}\r\n          ItemSeparatorComponent={this.renderSeparator}\r\n          keyExtractor={(item) => item.jars}\r\n          refreshing={this.state.loading}\r\n          onRefresh={this.handleRefresh}\r\n        />\r\n        <View style={styles.addWrapper}>\r\n          <View style={styles.inputView}>\r\n            <TextInput\r\n              style={styles.inputText}\r\n              placeholder=\"Add New Jar\"\r\n              placeholderTextColor=\"#888\"\r\n              value={this.state.jarname}\r\n              onChangeText={(text) => this.setState({ jarname: text })}\r\n            />\r\n          </View>\r\n          <TouchableOpacity\r\n            onPress={() => this.onAddJar()}\r\n            style={styles.addBtnShr}\r\n          >\r\n            <Text>ADD</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#f2f2f2\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n  },\r\n  card: {\r\n    width: \"95%\",\r\n    height: 80,\r\n    backgroundColor: \"#fff\",\r\n    borderRadius: 5,\r\n    elevation: 5,\r\n    margin: 10,\r\n  },\r\n  pill: {\r\n    flex: 2,\r\n    backgroundColor: \"lightgreen\",\r\n    padding: 5,\r\n    borderRadius: 5,\r\n    maxWidth: 60,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    marginRight: 20,\r\n  },\r\n  addBtn: {\r\n    backgroundColor: \"#fb5b5a\",\r\n    width: \"90%\",\r\n    margin: 15,\r\n    padding: 15,\r\n    borderRadius: 5,\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  addBtnShr: {\r\n    backgroundColor: \"#fb5b5a\",\r\n    height: 50,\r\n    width: \"20%\",\r\n    padding: 1,\r\n    borderRadius: 5,\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    margin: 20,\r\n    justifyContent: \"center\",\r\n  },\r\n  addWrapper: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n  },\r\n  inputView: {\r\n    width: \"65%\",\r\n    backgroundColor: \"#fff\",\r\n    borderRadius: 5,\r\n    borderWidth: 1,\r\n    borderColor: \"#fb5b5a\",\r\n    height: 50,\r\n    marginVertical: 20,\r\n    marginLeft: 20,\r\n    justifyContent: \"center\",\r\n    padding: 20,\r\n  },\r\n  inputText: {\r\n    height: 45,\r\n    color: \"#000\",\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}