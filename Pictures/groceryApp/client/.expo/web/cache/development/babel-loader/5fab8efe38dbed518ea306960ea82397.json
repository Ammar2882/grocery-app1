{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/home/amuizz/Desktop/groceryApp/groceryApp/client/screens/admin/Home.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Icon from \"@expo/vector-icons/AntDesign\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport \"../../global\";\n\nvar Home = function (_React$Component) {\n  _inherits(Home, _React$Component);\n\n  var _super = _createSuper(Home);\n\n  function Home(props) {\n    var _this;\n\n    _classCallCheck(this, Home);\n\n    _this = _super.call(this, props);\n\n    _this.componentDidMount = function () {\n      _this.props.navigation.addListener(\"focus\", function () {\n        console.log(\"blurredHome\");\n\n        _this.getAdminId();\n      });\n\n      _this.getAdminId();\n\n      _this.setState({\n        loading: false\n      });\n    };\n\n    _this.getAdminId = function _callee() {\n      var afterParse, adminId;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.t0 = JSON;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"item\"));\n\n            case 3:\n              _context.t1 = _context.sent;\n              afterParse = _context.t0.parse.call(_context.t0, _context.t1);\n              adminId = afterParse.adminId;\n              console.log(\"Admin ID: \" + adminId);\n\n              _this.setState({\n                adminID: adminId\n              });\n\n              _this.fetchData();\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.fetchData = function () {\n      _this.setState({\n        loading: true\n      });\n\n      fetch(global.ipAddress + \":3001/getHomeData/\" + _this.state.adminID).then(function (res) {\n        return res.json();\n      }).then(function (resJson) {\n        console.log(resJson);\n\n        _this.setState({\n          jarNames: resJson\n        });\n\n        _this.setState({\n          loading: false\n        });\n      }).catch(function (e) {\n        return console.log(e);\n      });\n    };\n\n    _this.getValues = function (val) {\n      if (val >= 0 && val <= 10) {\n        _this.SendMail();\n\n        return React.createElement(Text, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 14\n          }\n        }, \"high\");\n      } else if (val >= 11 && val <= 16) {\n        return React.createElement(Text, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 14\n          }\n        }, \"Medium\");\n      } else if (val >= 17) {\n        return React.createElement(Text, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 14\n          }\n        }, \"low\");\n      }\n    };\n\n    _this.onAddJar = function () {\n      _this.setState({\n        jarname: \"\"\n      });\n\n      fetch(global.ipAddress + \":3001/addJar/\" + _this.state.adminID, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          jarName: _this.state.jarname\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resJson) {\n        console.log(resJson);\n        console.log(\"added\");\n      }).catch(function (e) {\n        return console.log(e);\n      });\n    };\n\n    _this.SendMail = function () {\n      fetch(global.ipAddress + \":3001/sendMail/\" + _this.state.adminID, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (res) {\n        return res.text();\n      }).then(function (resJson) {\n        console.log(resJson);\n      });\n    };\n\n    _this.onDelete = function (jarName) {\n      _this.setState({\n        edit: false\n      });\n\n      _this.fetchData();\n\n      fetch(global.ipAddress + \":3001/deleteJarItem/\" + _this.state.adminID + \"/\" + jarName, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (resJson) {\n        console.log(resJson);\n      }).catch(function (e) {\n        return console.log(e);\n      });\n    };\n\n    _this.handleRefresh = function () {\n      _this.setState({\n        loading: false\n      }, function () {\n        _this.fetchData();\n      });\n    };\n\n    _this.renderSeparator = function () {\n      return React.createElement(View, {\n        style: {\n          marginBottom: -10\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 5\n        }\n      });\n    };\n\n    _this.state = {\n      loading: true,\n      edit: false,\n      jarNames: \"\",\n      currlevel: \"\",\n      jarname: \"\",\n      adminID: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(Home, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(React.Fragment, null, React.createElement(FlatList, {\n        data: this.state.jarNames,\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item,\n              index = _ref.index;\n          return React.createElement(TouchableOpacity, {\n            key: index,\n            onPress: function onPress() {\n              _this2.props.navigation.navigate(\"History\", item);\n\n              var dispatch = _this2.props;\n              dispatch({\n                type: \"navigate\",\n                payload: {\n                  loading: true\n                }\n              });\n            },\n            onLongPress: function onLongPress() {\n              return _this2.setState({\n                edit: true\n              });\n            },\n            style: styles.card,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 13\n            }\n          }, React.createElement(View, {\n            style: styles.jarNameContainer,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 15\n            }\n          }, React.createElement(Text, {\n            style: styles.jarText,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 17\n            }\n          }, item.key), React.createElement(View, {\n            style: styles.pill,\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 17\n            }\n          }, _this2.getValues(item.value)), _this2.state.edit ? React.createElement(Icon, {\n            onPress: function onPress() {\n              return _this2.onDelete(item.jars);\n            },\n            style: {\n              marginRight: 20\n            },\n            name: \"close\",\n            size: 19,\n            color: \"red\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 19\n            }\n          }) : null));\n        },\n        ItemSeparatorComponent: this.renderSeparator,\n        refreshing: this.state.loading,\n        onRefresh: this.handleRefresh,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 9\n        }\n      }), React.createElement(View, {\n        style: styles.addWrapper,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: styles.inputView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }\n      }, React.createElement(TextInput, {\n        style: styles.inputText,\n        placeholder: \"Add New Jar\",\n        placeholderTextColor: \"#888\",\n        value: this.state.jarname,\n        onChangeText: function onChangeText(text) {\n          return _this2.setState({\n            jarname: text\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }\n      })), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.onAddJar();\n        },\n        style: styles.addBtnShr,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }\n      }, React.createElement(Text, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 13\n        }\n      }, \"ADD\"))));\n    }\n  }]);\n\n  return Home;\n}(React.Component);\n\nexport { Home as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    backgroundColor: \"#f2f2f2\",\n    width: \"100%\",\n    height: \"100%\"\n  },\n  card: {\n    width: \"95%\",\n    height: 80,\n    backgroundColor: \"#fff\",\n    borderRadius: 5,\n    elevation: 5,\n    margin: 10\n  },\n  pill: {\n    flex: 2,\n    backgroundColor: \"lightgreen\",\n    padding: 5,\n    borderRadius: 5,\n    maxWidth: 65,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginRight: 20\n  },\n  addBtn: {\n    backgroundColor: \"#fb5b5a\",\n    width: \"90%\",\n    margin: 15,\n    padding: 15,\n    borderRadius: 5,\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\"\n  },\n  addBtnShr: {\n    backgroundColor: \"#fb5b5a\",\n    height: 50,\n    width: \"20%\",\n    padding: 1,\n    borderRadius: 5,\n    display: \"flex\",\n    alignItems: \"center\",\n    margin: 20,\n    justifyContent: \"center\"\n  },\n  addWrapper: {\n    display: \"flex\",\n    flexDirection: \"row\"\n  },\n  inputView: {\n    width: \"65%\",\n    backgroundColor: \"#fff\",\n    borderRadius: 5,\n    borderWidth: 1,\n    borderColor: \"#fb5b5a\",\n    height: 50,\n    marginVertical: 20,\n    marginLeft: 20,\n    justifyContent: \"center\",\n    padding: 20\n  },\n  inputText: {\n    height: 45,\n    color: \"#000\"\n  },\n  jarNameContainer: {\n    flexDirection: \"row\",\n    marginVertical: 30\n  },\n  jarText: {\n    flex: 1,\n    fontSize: 16,\n    marginLeft: 20\n  }\n});","map":{"version":3,"sources":["/home/amuizz/Desktop/groceryApp/groceryApp/client/screens/admin/Home.js"],"names":["React","Icon","AsyncStorage","Home","props","componentDidMount","navigation","addListener","console","log","getAdminId","setState","loading","JSON","getItem","afterParse","parse","adminId","adminID","fetchData","fetch","global","ipAddress","state","then","res","json","resJson","jarNames","catch","e","getValues","val","SendMail","onAddJar","jarname","method","headers","body","stringify","jarName","text","onDelete","edit","handleRefresh","renderSeparator","marginBottom","currlevel","item","index","navigate","dispatch","type","payload","styles","card","jarNameContainer","jarText","key","pill","value","jars","marginRight","addWrapper","inputView","inputText","addBtnShr","Component","StyleSheet","create","container","flex","alignItems","backgroundColor","width","height","borderRadius","elevation","margin","padding","maxWidth","display","justifyContent","addBtn","flexDirection","borderWidth","borderColor","marginVertical","marginLeft","color","fontSize"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport {\r\n  StyleSheet,\r\n  FlatList,\r\n  View,\r\n  Text,\r\n  TouchableOpacity,\r\n  TextInput,\r\n} from \"react-native\";\r\nimport Icon from \"react-native-vector-icons/AntDesign\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nimport \"../../global\";\r\n\r\nexport default class Home extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: true,\r\n      edit: false,\r\n      jarNames: \"\",\r\n      currlevel: \"\",\r\n      jarname: \"\",\r\n      adminID: \"\",\r\n    };\r\n  }\r\n\r\n  componentDidMount = () => {\r\n    this.props.navigation.addListener(\"focus\", () => {\r\n      console.log(\"blurredHome\");\r\n      this.getAdminId();\r\n    });\r\n    this.getAdminId();\r\n    this.setState({ loading: false });\r\n  };\r\n\r\n  getAdminId = async () => {\r\n    const afterParse = JSON.parse(await AsyncStorage.getItem(\"item\"));\r\n    const adminId = afterParse.adminId;\r\n    console.log(\"Admin ID: \" + adminId);\r\n    this.setState({ adminID: adminId });\r\n    this.fetchData();\r\n  };\r\n\r\n  fetchData = () => {\r\n    this.setState({ loading: true });\r\n    fetch(`${global.ipAddress}:3001/getHomeData/` + this.state.adminID)\r\n      .then((res) => res.json())\r\n      .then((resJson) => {\r\n        console.log(resJson);\r\n        this.setState({ jarNames: resJson });\r\n        this.setState({ loading: false });\r\n      })\r\n      .catch((e) => console.log(e));\r\n  };\r\n\r\n  getValues = (val) => {\r\n    if (val >= 0 && val <= 10) {\r\n      this.SendMail();\r\n      return <Text>high</Text>;\r\n    } else if (val >= 11 && val <= 16) {\r\n      return <Text>Medium</Text>;\r\n    } else if (val >= 17) {\r\n      return <Text>low</Text>;\r\n    }\r\n  };\r\n\r\n  onAddJar = () => {\r\n    this.setState({ jarname: \"\" });\r\n    fetch(`${global.ipAddress}:3001/addJar/` + this.state.adminID, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        jarName: this.state.jarname,\r\n      }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((resJson) => {\r\n        console.log(resJson);\r\n        console.log(\"added\");\r\n      })\r\n      .catch((e) => console.log(e));\r\n  };\r\n\r\n  SendMail = () => {\r\n    fetch(`${global.ipAddress}:3001/sendMail/` + this.state.adminID, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.text())\r\n      .then((resJson) => {\r\n        console.log(resJson);\r\n      });\r\n  };\r\n\r\n  onDelete = (jarName) => {\r\n    this.setState({ edit: false });\r\n    this.fetchData();\r\n    fetch(\r\n      `${global.ipAddress}:3001/deleteJarItem/` +\r\n        this.state.adminID +\r\n        \"/\" +\r\n        jarName,\r\n      {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    )\r\n      .then((res) => res.json())\r\n      .then((resJson) => {\r\n        console.log(resJson);\r\n      })\r\n      .catch((e) => console.log(e));\r\n  };\r\n\r\n  handleRefresh = () => {\r\n    this.setState({ loading: false }, () => {\r\n      this.fetchData();\r\n    });\r\n  };\r\n\r\n  renderSeparator = () => (\r\n    <View\r\n      style={{\r\n        marginBottom: -10,\r\n      }}\r\n    />\r\n  );\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <FlatList\r\n          data={this.state.jarNames}\r\n          renderItem={({ item, index }) => (\r\n            <TouchableOpacity\r\n              key={index}\r\n              onPress={() => {\r\n                this.props.navigation.navigate(\"History\", item);\r\n                const dispatch = this.props;\r\n                dispatch({ type: \"navigate\", payload: { loading: true } });\r\n              }}\r\n              onLongPress={() => this.setState({ edit: true })}\r\n              style={styles.card}\r\n            >\r\n              <View style={styles.jarNameContainer}>\r\n                <Text style={styles.jarText}>{item.key}</Text>\r\n                <View style={styles.pill}>{this.getValues(item.value)}</View>\r\n                {this.state.edit ? (\r\n                  <Icon\r\n                    onPress={() => this.onDelete(item.jars)}\r\n                    style={{ marginRight: 20 }}\r\n                    name=\"close\"\r\n                    size={19}\r\n                    color=\"red\"\r\n                  />\r\n                ) : null}\r\n              </View>\r\n            </TouchableOpacity>\r\n          )}\r\n          ItemSeparatorComponent={this.renderSeparator}\r\n          refreshing={this.state.loading}\r\n          onRefresh={this.handleRefresh}\r\n        />\r\n        <View style={styles.addWrapper}>\r\n          <View style={styles.inputView}>\r\n            <TextInput\r\n              style={styles.inputText}\r\n              placeholder=\"Add New Jar\"\r\n              placeholderTextColor=\"#888\"\r\n              value={this.state.jarname}\r\n              onChangeText={(text) => this.setState({ jarname: text })}\r\n            />\r\n          </View>\r\n          <TouchableOpacity\r\n            onPress={() => this.onAddJar()}\r\n            style={styles.addBtnShr}\r\n          >\r\n            <Text>ADD</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#f2f2f2\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n  },\r\n  card: {\r\n    width: \"95%\",\r\n    height: 80,\r\n    backgroundColor: \"#fff\",\r\n    borderRadius: 5,\r\n    elevation: 5,\r\n    margin: 10,\r\n  },\r\n  pill: {\r\n    flex: 2,\r\n    backgroundColor: \"lightgreen\",\r\n    padding: 5,\r\n    borderRadius: 5,\r\n    maxWidth: 65,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    marginRight: 20,\r\n  },\r\n  addBtn: {\r\n    backgroundColor: \"#fb5b5a\",\r\n    width: \"90%\",\r\n    margin: 15,\r\n    padding: 15,\r\n    borderRadius: 5,\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  addBtnShr: {\r\n    backgroundColor: \"#fb5b5a\",\r\n    height: 50,\r\n    width: \"20%\",\r\n    padding: 1,\r\n    borderRadius: 5,\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    margin: 20,\r\n    justifyContent: \"center\",\r\n  },\r\n  addWrapper: { display: \"flex\", flexDirection: \"row\" },\r\n  inputView: {\r\n    width: \"65%\",\r\n    backgroundColor: \"#fff\",\r\n    borderRadius: 5,\r\n    borderWidth: 1,\r\n    borderColor: \"#fb5b5a\",\r\n    height: 50,\r\n    marginVertical: 20,\r\n    marginLeft: 20,\r\n    justifyContent: \"center\",\r\n    padding: 20,\r\n  },\r\n  inputText: { height: 45, color: \"#000\" },\r\n  jarNameContainer: { flexDirection: \"row\", marginVertical: 30 },\r\n  jarText: { flex: 1, fontSize: 16, marginLeft: 20 },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}