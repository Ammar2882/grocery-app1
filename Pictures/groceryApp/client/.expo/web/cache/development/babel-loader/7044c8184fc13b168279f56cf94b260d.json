{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/amuizz/Desktop/groceryApp/groceryApp/client/screens/admin/Home.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useEffect, useState } from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Icon from \"@expo/vector-icons/AntDesign\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport \"../../global\";\nexport default function Home() {\n  var _this = this;\n\n  var _useState = useState({\n    loading: true,\n    edit: false,\n    jarNames: \"\",\n    currlevel: \"\",\n    jarname: \"\",\n    adminID: \"\"\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  useEffect(function () {\n    _this.props.navigation.addListener(\"focus\", function () {\n      console.log(\"blurredHome\");\n      getAdminId();\n    });\n\n    getAdminId();\n    setState({\n      loading: false\n    });\n  }, []);\n\n  var getAdminId = function getAdminId() {\n    var afterParse, adminId;\n    return _regeneratorRuntime.async(function getAdminId$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.t0 = JSON;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"item\"));\n\n          case 3:\n            _context.t1 = _context.sent;\n            afterParse = _context.t0.parse.call(_context.t0, _context.t1);\n            adminId = afterParse.adminId;\n            console.log(\"Admin ID: \" + adminId);\n            setState(Object.assign.apply(Object, _toConsumableArray(state).concat([{\n              adminID: adminId\n            }])));\n\n            _this.fetchData();\n\n          case 9:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var fetchData = function fetchData() {\n    _this.setState({\n      loading: true\n    });\n\n    fetch(global.ipAddress + \":3001/getHomeData/\" + _this.state.adminID).then(function (res) {\n      return res.json();\n    }).then(function (resJson) {\n      console.log(resJson);\n\n      _this.setState({\n        jarNames: resJson\n      });\n\n      _this.setState({\n        loading: false\n      });\n    }).catch(function (e) {\n      return console.log(e);\n    });\n  };\n\n  var getValues = function getValues(val) {\n    if (val >= 0 && val <= 10) {\n      _this.SendMail();\n\n      return React.createElement(Text, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 14\n        }\n      }, \"high\");\n    } else if (val >= 11 && val <= 16) {\n      return React.createElement(Text, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 14\n        }\n      }, \"Medium\");\n    } else if (val >= 17) {\n      return React.createElement(Text, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 14\n        }\n      }, \"low\");\n    }\n  };\n\n  var onAddJar = function onAddJar() {\n    _this.setState({\n      jarname: \"\"\n    });\n\n    fetch(global.ipAddress + \":3001/addJar/\" + _this.state.adminID, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        jarName: _this.state.jarname\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (resJson) {\n      console.log(resJson);\n      console.log(\"added\");\n    }).catch(function (e) {\n      return console.log(e);\n    });\n  };\n\n  var SendMail = function SendMail() {\n    fetch(global.ipAddress + \":3001/sendMail/\" + _this.state.adminID, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (res) {\n      return res.text();\n    }).then(function (resJson) {\n      console.log(resJson);\n    });\n  };\n\n  var onDelete = function onDelete(jarName) {\n    _this.setState({\n      edit: false\n    });\n\n    _this.fetchData();\n\n    fetch(global.ipAddress + \":3001/deleteJarItem/\" + _this.state.adminID + \"/\" + jarName, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (resJson) {\n      console.log(resJson);\n    }).catch(function (e) {\n      return console.log(e);\n    });\n  };\n\n  var handleRefresh = function handleRefresh() {\n    _this.setState({\n      loading: false\n    }, function () {\n      _this.fetchData();\n    });\n  };\n\n  var renderSeparator = function renderSeparator() {\n    return React.createElement(View, {\n      style: {\n        marginBottom: -10\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 5\n      }\n    });\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(FlatList, {\n    data: state.jarNames,\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item,\n          index = _ref.index;\n      return React.createElement(TouchableOpacity, {\n        key: index,\n        onPress: function onPress() {\n          props.navigation.navigate(\"History\", item);\n          dispatch({\n            type: \"navigate\",\n            payload: {\n              loading: true\n            }\n          });\n        },\n        onLongPress: function onLongPress() {\n          return setState({\n            edit: true\n          });\n        },\n        style: styles.card,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        style: styles.jarNameContainer,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 15\n        }\n      }, React.createElement(Text, {\n        style: styles.jarText,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 17\n        }\n      }, item.key), React.createElement(View, {\n        style: styles.pill,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 17\n        }\n      }, getValues(item.value)), _this.state.edit ? React.createElement(Icon, {\n        onPress: function onPress() {\n          return onDelete(item.jars);\n        },\n        style: {\n          marginRight: 20\n        },\n        name: \"close\",\n        size: 19,\n        color: \"red\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 19\n        }\n      }) : null));\n    },\n    ItemSeparatorComponent: renderSeparator,\n    refreshing: state.loading,\n    onRefresh: handleRefresh,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 9\n    }\n  }), React.createElement(View, {\n    style: styles.addWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.inputView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 11\n    }\n  }, React.createElement(TextInput, {\n    style: styles.inputText,\n    placeholder: \"Add New Jar\",\n    placeholderTextColor: \"#888\",\n    value: state.jarname,\n    onChangeText: function onChangeText(text) {\n      return setState({\n        jarname: text\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 13\n    }\n  })), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return onAddJar();\n    },\n    style: styles.addBtnShr,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 11\n    }\n  }, React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }\n  }, \"ADD\"))));\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: \"center\",\n    backgroundColor: \"#f2f2f2\",\n    width: \"100%\",\n    height: \"100%\"\n  },\n  card: {\n    width: \"95%\",\n    height: 80,\n    backgroundColor: \"#fff\",\n    borderRadius: 5,\n    elevation: 5,\n    margin: 10\n  },\n  pill: {\n    flex: 2,\n    backgroundColor: \"lightgreen\",\n    padding: 5,\n    borderRadius: 5,\n    maxWidth: 65,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginRight: 20\n  },\n  addBtn: {\n    backgroundColor: \"#fb5b5a\",\n    width: \"90%\",\n    margin: 15,\n    padding: 15,\n    borderRadius: 5,\n    display: \"flex\",\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    justifyContent: \"space-between\"\n  },\n  addBtnShr: {\n    backgroundColor: \"#fb5b5a\",\n    height: 50,\n    width: \"20%\",\n    padding: 1,\n    borderRadius: 5,\n    display: \"flex\",\n    alignItems: \"center\",\n    margin: 20,\n    justifyContent: \"center\"\n  },\n  addWrapper: {\n    display: \"flex\",\n    flexDirection: \"row\"\n  },\n  inputView: {\n    width: \"65%\",\n    backgroundColor: \"#fff\",\n    borderRadius: 5,\n    borderWidth: 1,\n    borderColor: \"#fb5b5a\",\n    height: 50,\n    marginVertical: 20,\n    marginLeft: 20,\n    justifyContent: \"center\",\n    padding: 20\n  },\n  inputText: {\n    height: 45,\n    color: \"#000\"\n  },\n  jarNameContainer: {\n    flexDirection: \"row\",\n    marginVertical: 30\n  },\n  jarText: {\n    flex: 1,\n    fontSize: 16,\n    marginLeft: 20\n  }\n});","map":{"version":3,"sources":["/home/amuizz/Desktop/groceryApp/groceryApp/client/screens/admin/Home.js"],"names":["React","useEffect","useState","Icon","AsyncStorage","Home","loading","edit","jarNames","currlevel","jarname","adminID","state","setState","props","navigation","addListener","console","log","getAdminId","JSON","getItem","afterParse","parse","adminId","Object","assign","fetchData","fetch","global","ipAddress","then","res","json","resJson","catch","e","getValues","val","SendMail","onAddJar","method","headers","body","stringify","jarName","text","onDelete","handleRefresh","renderSeparator","marginBottom","item","index","navigate","dispatch","type","payload","styles","card","jarNameContainer","jarText","key","pill","value","jars","marginRight","addWrapper","inputView","inputText","addBtnShr","StyleSheet","create","container","flex","alignItems","backgroundColor","width","height","borderRadius","elevation","margin","padding","maxWidth","display","justifyContent","addBtn","flexDirection","borderWidth","borderColor","marginVertical","marginLeft","color","fontSize"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport {\r\n  StyleSheet,\r\n  FlatList,\r\n  View,\r\n  Text,\r\n  TouchableOpacity,\r\n  TextInput,\r\n} from \"react-native\";\r\nimport Icon from \"react-native-vector-icons/AntDesign\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\nimport \"../../global\";\r\n\r\nexport default function Home (){\r\n  const[state,setState] = useState({\r\n    loading: true,\r\n    edit: false,\r\n    jarNames: \"\",\r\n    currlevel: \"\",\r\n    jarname: \"\",\r\n    adminID: \"\",\r\n  })\r\n  useEffect(() => {\r\n    this.props.navigation.addListener(\"focus\", () => {\r\n      console.log(\"blurredHome\");\r\n      getAdminId();\r\n    });\r\n   getAdminId();\r\n   setState({ loading: false });\r\n\r\n\r\n  }, []);\r\n\r\n  const getAdminId = async () => {\r\n    const afterParse = JSON.parse(await AsyncStorage.getItem(\"item\"));\r\n    const adminId = afterParse.adminId;\r\n    console.log(\"Admin ID: \" + adminId);\r\n    setState(Object.assign(...state,{ adminID: adminId }));\r\n    this.fetchData();\r\n  };\r\n\r\n  const fetchData = () => {\r\n    this.setState({ loading: true });\r\n    fetch(`${global.ipAddress}:3001/getHomeData/` + this.state.adminID)\r\n      .then((res) => res.json())\r\n      .then((resJson) => {\r\n        console.log(resJson);\r\n        this.setState({ jarNames: resJson });\r\n        this.setState({ loading: false });\r\n      })\r\n      .catch((e) => console.log(e));\r\n  };\r\n\r\n  const getValues = (val) => {\r\n    if (val >= 0 && val <= 10) {\r\n      this.SendMail();\r\n      return <Text>high</Text>;\r\n    } else if (val >= 11 && val <= 16) {\r\n      return <Text>Medium</Text>;\r\n    } else if (val >= 17) {\r\n      return <Text>low</Text>;\r\n    }\r\n  };\r\n\r\n  const onAddJar = () => {\r\n    this.setState({ jarname: \"\" });\r\n    fetch(`${global.ipAddress}:3001/addJar/` + this.state.adminID, {\r\n      method: \"PUT\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        jarName: this.state.jarname,\r\n      }),\r\n    })\r\n      .then((res) => res.json())\r\n      .then((resJson) => {\r\n        console.log(resJson);\r\n        console.log(\"added\");\r\n      })\r\n      .catch((e) => console.log(e));\r\n  };\r\n\r\n  const SendMail = () => {\r\n    fetch(`${global.ipAddress}:3001/sendMail/` + this.state.adminID, {\r\n      method: \"GET\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    })\r\n      .then((res) => res.text())\r\n      .then((resJson) => {\r\n        console.log(resJson);\r\n      });\r\n  };\r\n\r\n  const onDelete = (jarName) => {\r\n    this.setState({ edit: false });\r\n    this.fetchData();\r\n    fetch(\r\n      `${global.ipAddress}:3001/deleteJarItem/` +\r\n        this.state.adminID +\r\n        \"/\" +\r\n        jarName,\r\n      {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      }\r\n    )\r\n      .then((res) => res.json())\r\n      .then((resJson) => {\r\n        console.log(resJson);\r\n      })\r\n      .catch((e) => console.log(e));\r\n  };\r\n\r\n  const handleRefresh = () => {\r\n    this.setState({ loading: false }, () => {\r\n      this.fetchData();\r\n    });\r\n  };\r\n\r\n  const renderSeparator = () => (\r\n    <View\r\n      style={{\r\n        marginBottom: -10,\r\n      }}\r\n    />\r\n  );\r\n\r\n\r\n    return (\r\n      <>\r\n        <FlatList\r\n          data={state.jarNames}\r\n          renderItem={({ item, index }) => (\r\n            <TouchableOpacity\r\n              key={index}\r\n              onPress={() => {\r\n                props.navigation.navigate(\"History\", item);\r\n                dispatch({ type: \"navigate\", payload: { loading: true } });\r\n              }}\r\n              onLongPress={() => setState({ edit: true })}\r\n              style={styles.card}\r\n            >\r\n              <View style={styles.jarNameContainer}>\r\n                <Text style={styles.jarText}>{item.key}</Text>\r\n                <View style={styles.pill}>{getValues(item.value)}</View>\r\n                {this.state.edit ? (\r\n                  <Icon\r\n                    onPress={() => onDelete(item.jars)}\r\n                    style={{ marginRight: 20 }}\r\n                    name=\"close\"\r\n                    size={19}\r\n                    color=\"red\"\r\n                  />\r\n                ) : null}\r\n              </View>\r\n            </TouchableOpacity>\r\n          )}\r\n          ItemSeparatorComponent={renderSeparator}\r\n          refreshing={state.loading}\r\n          onRefresh={handleRefresh}\r\n        />\r\n        <View style={styles.addWrapper}>\r\n          <View style={styles.inputView}>\r\n            <TextInput\r\n              style={styles.inputText}\r\n              placeholder=\"Add New Jar\"\r\n              placeholderTextColor=\"#888\"\r\n              value={state.jarname}\r\n              onChangeText={(text) => setState({ jarname: text })}\r\n            />\r\n          </View>\r\n          <TouchableOpacity\r\n            onPress={() => onAddJar()}\r\n            style={styles.addBtnShr}\r\n          >\r\n            <Text>ADD</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </>\r\n    );\r\n  \r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    alignItems: \"center\",\r\n    backgroundColor: \"#f2f2f2\",\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n  },\r\n  card: {\r\n    width: \"95%\",\r\n    height: 80,\r\n    backgroundColor: \"#fff\",\r\n    borderRadius: 5,\r\n    elevation: 5,\r\n    margin: 10,\r\n  },\r\n  pill: {\r\n    flex: 2,\r\n    backgroundColor: \"lightgreen\",\r\n    padding: 5,\r\n    borderRadius: 5,\r\n    maxWidth: 65,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n    marginRight: 20,\r\n  },\r\n  addBtn: {\r\n    backgroundColor: \"#fb5b5a\",\r\n    width: \"90%\",\r\n    margin: 15,\r\n    padding: 15,\r\n    borderRadius: 5,\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"space-between\",\r\n  },\r\n  addBtnShr: {\r\n    backgroundColor: \"#fb5b5a\",\r\n    height: 50,\r\n    width: \"20%\",\r\n    padding: 1,\r\n    borderRadius: 5,\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    margin: 20,\r\n    justifyContent: \"center\",\r\n  },\r\n  addWrapper: { display: \"flex\", flexDirection: \"row\" },\r\n  inputView: {\r\n    width: \"65%\",\r\n    backgroundColor: \"#fff\",\r\n    borderRadius: 5,\r\n    borderWidth: 1,\r\n    borderColor: \"#fb5b5a\",\r\n    height: 50,\r\n    marginVertical: 20,\r\n    marginLeft: 20,\r\n    justifyContent: \"center\",\r\n    padding: 20,\r\n  },\r\n  inputText: { height: 45, color: \"#000\" },\r\n  jarNameContainer: { flexDirection: \"row\", marginVertical: 30 },\r\n  jarText: { flex: 1, fontSize: 16, marginLeft: 20 },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}